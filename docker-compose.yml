version: '3.1'

services:
  platform:
    container_name: platform
    build: .
    environment:
      - GITHUB_USERNAME
      - GITHUB_PASSWORD
      - DOCKERHUB_EMAIL
      - DOCKERHUB_USERNAME
      - DOCKERHUB_PASSWORD
    privileged: true
    entrypoint: /bin/sh
    stdin_open: true
    tty: true
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./platform/ansible:/etc/ansible
      - ./platform/docker:/root/docker
      - ./platform/git:/root/git
      - ./platform/ssh:/root/ssh
      - ./resource:/root/resource
      - ./VERSION:/root/VERSION
      - ./app:/srv
