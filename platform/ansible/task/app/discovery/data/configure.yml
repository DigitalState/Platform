---
- block:
    - name: Set discovery data
      include_role:
        name: app/discovery/data/configure
      vars:
        _data:
          assets:
            host: '{{ app.assets.api.host }}'
            enabled: '{{ app.assets.enabled }}'
            attributes: '{{ app.assets.attributes }}'
          authentication:
            host: '{{ app.authentication.api.host }}'
            enabled: '{{ app.authentication.enabled }}'
            attributes: '{{ app.authentication.attributes }}'
          camunda:
            host: '{{ app.camunda.api.host }}/engine-rest'
            enabled: '{{ app.camunda.enabled }}'
            attributes: '{{ app.camunda.attributes }}'
          cases:
            host: '{{ app.cases.api.host }}'
            enabled: '{{ app.cases.enabled }}'
            attributes: '{{ app.cases.attributes }}'
          cms:
            host: '{{ app.cms.api.host }}'
            enabled: '{{ app.cms.enabled }}'
            attributes: '{{ app.cms.attributes }}'
          discovery:
            host: '{{ app.discovery.api.host }}'
            enabled: '{{ app.discovery.enabled }}'
            attributes: '{{ app.discovery.attributes }}'
          formio:
            host: '{{ app.formio.api.host }}'
            enabled: '{{ app.formio.enabled }}'
            attributes: '{{ app.formio.attributes }}'
          identities:
            host: '{{ app.identities.api.host }}'
            enabled: '{{ app.identities.enabled }}'
            attributes: '{{ app.identities.attributes }}'
          interactions:
            host: '{{ app.interactions.api.host }}'
            enabled: '{{ app.interactions.enabled }}'
            attributes: '{{ app.interactions.attributes }}'
          logs:
            host: '{{ app.logs.api.host }}'
            enabled: '{{ app.logs.enabled }}'
            attributes: '{{ app.logs.attributes }}'
          records:
            host: '{{ app.records.api.host }}'
            enabled: '{{ app.records.enabled }}'
            attributes: '{{ app.records.attributes }}'
          services:
            host: '{{ app.services.api.host }}'
            enabled: '{{ app.services.enabled }}'
            attributes: '{{ app.services.attributes }}'
          tasks:
            host: '{{ app.tasks.api.host }}'
            enabled: '{{ app.tasks.enabled }}'
            attributes: '{{ app.tasks.attributes }}'
          tenants:
            host: '{{ app.tenants.api.host }}'
            enabled: '{{ app.tenants.enabled }}'
            attributes: '{{ app.tenants.attributes }}'
          topics:
            host: '{{ app.topics.api.host }}'
            enabled: '{{ app.topics.enabled }}'
            attributes: '{{ app.topics.attributes }}'
  when: app.discovery.enabled
  tags: [discovery]
