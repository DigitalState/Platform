---
- block:
    - name: Detect authentication fixtures directory override
      local_action: 'stat path=/root/resource/fixtures/authentication'
      register: override
    - name: Load authentication database fixtures
      include_role:
        name: app/authentication/database/fixtures/load
      vars:
        _fixtures: '{{ "test" if env[0:4] == "test" else "dev" }}'
        _override: '{{ "/root/resource/fixtures/authentication" if override.stat.exists == true and env[0:4] != "test" else "" }}'
  when: app.authentication.enabled
  tags: [authentication]
