---
- block:
    - name: Backup microservice fixtures directory
      shell: 'mv /srv/microservice/src/AppBundle/Resources/fixtures/{{ _fixtures }} /srv/microservice/src/AppBundle/Resources/fixtures/_{{ _fixtures }}'
    - name: Download microservice fixtures directory override
      copy:
        src: '{{ _override }}/'
        dest: '/srv/microservice/src/AppBundle/Resources/fixtures/{{ _fixtures }}'
    - import_tasks: load.yml
    - name: Delete microservice fixtures directory override
      file:
        path: '/srv/microservice/src/AppBundle/Resources/fixtures/{{ _fixtures }}'
        state: absent
    - name: Restore microservice fixtures directory backup
      shell: 'mv /srv/microservice/src/AppBundle/Resources/fixtures/_{{ _fixtures }} /srv/microservice/src/AppBundle/Resources/fixtures/{{ _fixtures }}'
  tags: [microservice]
